language: python
python:
  - 3.6
cache:
  directories:
    - $HOME/.cache/pip
    - $HOME/.ccache  # https://github.com/travis-ci/travis-ci/issues/5853


env:
  global:
    # Doctr deploy key for leilakhalili87/byxtal
    - secure: "owUZKspNaeLpfgmra+FRNmvBxEp6Lkn3NfskJj5Wyxns0wOP/Jxtv6+x7c4wlRIeyoBlf2hNj2SzjXygpGDbcZzC0amdEA3cx/fnRfCDOg79l/m3aSQgmidTDn6N+xFnXrUR/cn992YKVJkogQgFTSZIuyzWptdqvKv+9tU8vPB1BDuwEsr/y4TK63oe5dpHx0rHOTr56Ym4fdI6ZeVCi2zrMIei4bZ7Itx3iclYZHzJDVbvJTuoyZ3KVAhqzC27E95cdSozOTP2zEfmrKWKrTs2+hhI+QA1BZMm68uZ36W/5Sh8Dso/gti3/tc9W5FS8ouq3qH5aHUa7EZOrltO0Xi9Ai8D0QODnlEO+k3uE0sY/LzXroOHbqQaIKVHNbQ9QDTWuySEbuv8xee5Fp2P/x4oi1nPZcPtIoIJTpi9UTsJi2LJK3xAQISq028la1NR5tIFJq6ka4/4r+6DqRw1jIvQkwrCrZDCUY8+M8KWl/nslAkk5r8RzZc2pVtll1DOa1Q84964Los6vLDapWN+1A9KMX5nS4z+c9hC4IFCI+WSYAZg6RU+0XJVIpGwGN9JubnaavWKNGSXoaar8NQyilvArM6VtOUJQoI0OluQzF9BHV2qPxSmSrqaMtW+W7Ql6vXEvhGB7yHcI/ooUvTZUve0S5VpNAubbiQPosq4wmg="
install:
  - sudo apt-get install -y
    pandoc
  # Install this package and the packages listed in requirements.txt.
  - pip install .
  # Install extra requirements for running tests and building docs.
  - pip install -r requirements-dev.txt

script:
  - coverage run -m pytest  # Run the tests and check for test coverage.
  - coverage report -m  # Generate test coverage report.
  - codecov  # Upload the report to codecov.
  # - flake8  # Enforce code style ('relaxed' line length limit is set in .flake8 config file).
  - set -e
  - make -C docs html  # Build the documentation.
  - pip install doctr
  - doctr deploy --built-docs docs/build/html .
