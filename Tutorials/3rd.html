

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title># 3.How to find the CSL/DSC lattices of a Σ-rotation using GBpy! &mdash; byxtal 0.post65+g0172e2b documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Modules" href="../Modules.html" />
    <link rel="prev" title="# 2. How to find a reduced planar basis for a Grain Boundary using byxtal!" href="2nd.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> byxtal
          

          
          </a>

          
            
            
              <div class="version">
                0.post65+g0172e2b
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../min_versions.html">Minimum Version of Python and NumPy</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1st.html">Determine the 2D Basis of a Plane</a></li>
<li class="toctree-l2"><a class="reference internal" href="2nd.html"># 2. How to find a reduced planar basis for a Grain Boundary using byxtal!</a></li>
<li class="toctree-l2"><a class="reference internal" href="2nd.html#2.1-Miller-Indices:">2.1 Miller Indices:</a></li>
<li class="toctree-l2"><a class="reference internal" href="2nd.html#2.2-Problem-Definition:">2.2 Problem Definition:</a></li>
<li class="toctree-l2"><a class="reference internal" href="2nd.html#2.3-Extracting-the-Misorientation-Operator">2.3 Extracting the Misorientation Operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="2nd.html#2.4-Finding-the-GB-Planar-Basis-(2D-CSL-Basis):">2.4 Finding the GB Planar Basis (2D CSL Basis):</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"># 3.How to find the CSL/DSC lattices of a Σ-rotation using GBpy!</a></li>
<li class="toctree-l2"><a class="reference internal" href="#3.1.-Finding-the-Σ-rotations">3.1. Finding the Σ-rotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="#3.2.-Changing-the-Basis-of-a-Transformation-Matrix">3.2. Changing the Basis of a Transformation Matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#3.3.-Finding-the-CSL-and-DSC-Lattices-of-a-Σ3-rotation:">3.3. Finding the CSL and DSC Lattices of a Σ3 rotation:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Modules.html">Modules</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">byxtal</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Tutorials</a> &raquo;</li>
        
      <li># 3.How to find the CSL/DSC lattices of a Σ-rotation using GBpy!</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Tutorials/3rd.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="#-3.How-to-find-the-CSL/DSC-lattices-of-a-Σ-rotation-using-GBpy!">
<h1># 3.How to find the CSL/DSC lattices of a Σ-rotation using GBpy!<a class="headerlink" href="##-3.How-to-find-the-CSL/DSC-lattices-of-a-Σ-rotation-using-GBpy!" title="Permalink to this headline">¶</a></h1>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">byxtal</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">pickle</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-1-78992d241469&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span><span class="ansi-green-fg">import</span> byxtal
<span class="ansi-green-intense-fg ansi-bold">      2</span> <span class="ansi-green-fg">import</span> numpy <span class="ansi-green-fg">as</span> np
<span class="ansi-green-intense-fg ansi-bold">      3</span> <span class="ansi-green-fg">import</span> os
<span class="ansi-green-intense-fg ansi-bold">      4</span> <span class="ansi-green-fg">import</span> inspect
<span class="ansi-green-intense-fg ansi-bold">      5</span> <span class="ansi-green-fg">import</span> pickle

<span class="ansi-red-fg">ModuleNotFoundError</span>: No module named &#39;byxtal&#39;
</pre></div></div>
</div>
</div>
<div class="section" id="3.1.-Finding-the-Σ-rotations">
<h1>3.1. Finding the Σ-rotations<a class="headerlink" href="#3.1.-Finding-the-Σ-rotations" title="Permalink to this headline">¶</a></h1>
<p>While Σ-rotations are widely known and used in crystallography they are not trivial to build. Therefore we have computed a wide range of Σ-rotations and have included them inside the byxtal package in a separate folder named pkl_files. If you have installed the byxtal package using the pip install byxtal command or if you have cloned the GBpy github repository on Github you have received the pkl_files folder. To access the pkl_files folder, you need to know where the byxtal package resides on
your system. The following steps will help you navigate through the byxtal package folder structure. If you already have the rotation matrix (3x3 matrix) associated with the Σ-rotation igonre the following steps.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">gbpy_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">((</span><span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">GBpy</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">gbpy_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-2-22f7c6a7fcc7&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>gbpy_dir <span class="ansi-blue-fg">=</span> os<span class="ansi-blue-fg">.</span>path<span class="ansi-blue-fg">.</span>dirname<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">(</span>inspect<span class="ansi-blue-fg">.</span>getfile<span class="ansi-blue-fg">(</span>GBpy<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> print<span class="ansi-blue-fg">(</span>gbpy_dir<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;os&#39; is not defined
</pre></div></div>
</div>
<p>The variable gbpy_dir is a string contaning the path to where GBpy resides on your system. pkl_files is a subfolder of the gbpy_dir. You can get the list of the files that are included in the pkl_files folder using the following command:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pkl_dir</span> <span class="o">=</span> <span class="n">gbpy_dir</span> <span class="o">+</span> <span class="s1">&#39;/pkl_files&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-3-704917acd6ed&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>pkl_dir <span class="ansi-blue-fg">=</span> gbpy_dir <span class="ansi-blue-fg">+</span> <span class="ansi-blue-fg">&#39;/pkl_files&#39;</span>

<span class="ansi-red-fg">NameError</span>: name &#39;gbpy_dir&#39; is not defined
</pre></div></div>
</div>
<p>os.listdir(pkl_dir)</p>
<p>The common Σ-rotations of cubic lattices are saved in a file named “cF_Id_csl_common_rotations.pkl”. You can find Σ-rotations of other lattices in the same folder similarly (i.e. hexagnal(hP), tetragonal(tP), etc.), however in this tutorial the focus is on face-centered cubic (f.c.c) lattice. To access the contents of “cF_Id_csl_common_rotations.pkl” use the following commands:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pkl_file</span> <span class="o">=</span> <span class="n">pkl_dir</span> <span class="o">+</span> <span class="s1">&#39;/cF_Id_csl_common_rotations.pkl&#39;</span>
<span class="n">pkl_content</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">pkl_file</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-5-944eef0fb6d3&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>pkl_file <span class="ansi-blue-fg">=</span> pkl_dir <span class="ansi-blue-fg">+</span> <span class="ansi-blue-fg">&#39;/cF_Id_csl_common_rotations.pkl&#39;</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> pkl_content <span class="ansi-blue-fg">=</span> pickle<span class="ansi-blue-fg">.</span>load<span class="ansi-blue-fg">(</span>open<span class="ansi-blue-fg">(</span>pkl_file<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;pkl_dir&#39; is not defined
</pre></div></div>
</div>
<p>The variable “pkl_content” contains first 200 common Σ-rotations of cubic lattices, stored as a dictionary data structure. Each entry in the dictionary can be access by specifying the <strong>key</strong> to that entry. The key for each sigma rotation is a <strong>string</strong> with the Σ-number. We would like to emphasize that the key to each entry has to be a string. For instance for Σ</p>
<p>3 you need to pass ‘3’ to the pkl_content as the key.</p>
<p>It is very important to note that all the rotation matrices are expressed in <strong>primitive bases</strong> of the associated lattices. To use the rotation matrices in an orthogonal basis one needs to perform similarity transformation on the provided rotation matrices. We will demonstrate an example of such transformation later in this tutorial. Luckily for cubic lattices the Σ</p>
<p>-rotations remain constant in both primitive and orthogonal bases.</p>
<p>To avoid the truncation error we have stored the Numerator (saved as ‘N’) and the Denominator (saved as ‘D’) of each Σ -rotation separately. To construct the rotation matrix associated with each Σ-rotation you need to divide the elements of <strong>N</strong> by elements of <strong>D</strong>. The result will be a 3x3 rotation matrix which will be a numpy array. The following steps shows how you can construct the rotation matrix associated with the Σ3 rotation:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-7-ffc2027a7208&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>pkl_content<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;3&#39;</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span>

<span class="ansi-red-fg">NameError</span>: name &#39;pkl_content&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">N3</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">D3</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;3&#39;</span><span class="p">][</span><span class="s1">&#39;D&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Sigma3</span> <span class="o">=</span> <span class="n">N3</span><span class="o">/</span><span class="n">D3</span>
<span class="nb">print</span><span class="p">(</span><span class="n">Sigma3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-8-c9421b84aeda&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>N3 <span class="ansi-blue-fg">=</span> pkl_content<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;3&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;N&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      2</span> D3 <span class="ansi-blue-fg">=</span> pkl_content<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;3&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;D&#39;</span><span class="ansi-blue-fg">]</span><span class="ansi-blue-fg">[</span><span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span> Sigma3 <span class="ansi-blue-fg">=</span> N3<span class="ansi-blue-fg">/</span>D3
<span class="ansi-green-intense-fg ansi-bold">      4</span> print<span class="ansi-blue-fg">(</span>Sigma3<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">NameError</span>: name &#39;pkl_content&#39; is not defined
</pre></div></div>
</div>
<p>Note that some of the Sigmas have more than one Sigma rotation. For instance Σ17 has two Σ-rotations often referred to as Σ17-a and Σ17-b. In such cases you will find two N matrices and two D matrices associated with each rotation. Use the following to access each N and D matrix.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-9-e14e77aa8ecb&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>pkl_content<span class="ansi-blue-fg">[</span><span class="ansi-blue-fg">&#39;17&#39;</span><span class="ansi-blue-fg">]</span>

<span class="ansi-red-fg">NameError</span>: name &#39;pkl_content&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">N17_a</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">D17_a</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">][</span><span class="s1">&#39;D&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">Sigma17_a</span> <span class="o">=</span> <span class="n">N17_a</span><span class="o">/</span><span class="n">D17_a</span>
<span class="nb">print</span> <span class="s1">&#39;Sigma17_a =&#39;</span><span class="p">,</span> <span class="n">Sigma17_a</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>

<span class="n">N17_b</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">][</span><span class="s1">&#39;N&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">D17_b</span> <span class="o">=</span> <span class="n">pkl_content</span><span class="p">[</span><span class="s1">&#39;17&#39;</span><span class="p">][</span><span class="s1">&#39;D&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
<span class="n">Sigma17_b</span> <span class="o">=</span> <span class="n">N17_b</span><span class="o">/</span><span class="n">D17_b</span>
<span class="nb">print</span> <span class="s1">&#39;Sigma17_b =&#39;</span><span class="p">,</span> <span class="n">Sigma17_b</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-cyan-fg">  File </span><span class="ansi-green-fg">&#34;&lt;ipython-input-10-18cbe0736c7d&gt;&#34;</span><span class="ansi-cyan-fg">, line </span><span class="ansi-green-fg">4</span>
<span class="ansi-red-fg">    print &#39;Sigma17_a =&#39;, Sigma17_a, &#39;\n&#39;</span>
                      ^
<span class="ansi-red-fg">SyntaxError</span><span class="ansi-red-fg">:</span> Missing parentheses in call to &#39;print&#39;. Did you mean print(&#39;Sigma17_a =&#39;, Sigma17_a, &#39;\n&#39;)?

</pre></div></div>
</div>
</div>
<div class="section" id="3.2.-Changing-the-Basis-of-a-Transformation-Matrix">
<h1>3.2. Changing the Basis of a Transformation Matrix<a class="headerlink" href="#3.2.-Changing-the-Basis-of-a-Transformation-Matrix" title="Permalink to this headline">¶</a></h1>
<p>So far we have been able to obtain the rotation matrix associated with the Σ3 rotation which is stored in the variable <strong>Sigma3</strong>. As mentioned in <strong>section 1.1</strong>, it is very important to recognize that the obtained rotation matrices are expressed in primitive basis of the lattice. To use the rotation matrices in an orthogonal basis one needs to perform similarity transformation on the provided rotation matrices.</p>
<p>By convention we use the <strong>p</strong> for primitive basis and <strong>po</strong> for orthogonal basis of a lattice.</p>
<p>If we define the transformation matrix of the Σ 3 (that transforms crystal p1 to p2) in the primitive basis as Tpp1→p2, same transformation in orthogonal basis of the lattice (e.g. supercell lattice) will be defined as Tpop1→p2</p>
<p>and can be found using the similarity transformation as:</p>
<div class="math notranslate nohighlight">
\begin{equation}
\mathcal{T^{po}_{p1→p2}=Λ^{po}_{p} × T^{p}_{p1→p2} × Λ^{p}_{po}}
\end{equation}</div><p>where <span class="math notranslate nohighlight">\(\mathcal{Λ^{po}_{p}}\)</span> is a 3x3 matrix which defines the components of the basis of the primitve lattice in an orthogonal reference frame attached to the same lattice. Therefore, Λpop is a constant for each lattice. Λpop for various lattices can be obtained from the lattice class in byxtal. For example, the components of a primitive f.c.c. lattice with lattice parameter a=1.0Å, <span class="math notranslate nohighlight">\(\mathcal{Λ^{po}_{p}}\)</span>, is defined as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">L_p_po</span> <span class="o">=</span> <span class="mf">1.0</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.</span><span class="p">]])</span>
<span class="n">L_p_po</span>
</pre></div>
</div>
</div>
<p>and <span class="math notranslate nohighlight">\(\mathcal{Λ^{po}_{p}}\)</span> is the inverse of <span class="math notranslate nohighlight">\(\mathcal{Λ^{p}_{po}}\)</span>:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">L_po_p</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">inv</span><span class="p">(</span><span class="n">L_p_po</span><span class="p">)</span>
<span class="n">L_po_p</span>
</pre></div>
</div>
</div>
<p>Therefore using similarity transformation, <span class="math notranslate nohighlight">\(\mathcal{T^{po}_{p1→p2}}\)</span> can be obtained as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">T_p1top2_po</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">L_p_po</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">Sigma3</span><span class="p">,</span> <span class="n">L_po_p</span><span class="p">))</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">T_p1top2_po</span>
</pre></div>
</div>
</div>
<p>As mentioned in section 1.1. it can be observed that <span class="math notranslate nohighlight">\(\mathcal{T^{po}_{p1→p2}}\)</span> and <span class="math notranslate nohighlight">\(\mathcal{T^{p}_{p1→p2}}\)</span> are the same for cubic lattices.</p>
</div>
<div class="section" id="3.3.-Finding-the-CSL-and-DSC-Lattices-of-a-Σ3-rotation:">
<h1>3.3. Finding the CSL and DSC Lattices of a Σ3 rotation:<a class="headerlink" href="#3.3.-Finding-the-CSL-and-DSC-Lattices-of-a-Σ3-rotation:" title="Permalink to this headline">¶</a></h1>
<p>To compute the CSL and DSC lattices, <strong>byxtal</strong> only requires the <span class="math notranslate nohighlight">\(\mathcal{T^{p}_{p1→p2}}\)</span> that can be directly accessed from the provided pkl files. It automatically performs the <a class="reference external" href="https://mathworld.wolfram.com/SimilarityTransformation.html">similarity transformation</a> using the <span class="math notranslate nohighlight">\(\mathcal{Λ^{po}_{p}}\)</span> that can be obtained from the lattice class.</p>
<p>We have stored the <span class="math notranslate nohighlight">\(\mathcal{Λ^{po}_{p}}\)</span> in <strong>L_p_po</strong> and <span class="math notranslate nohighlight">\(\mathcal{T^{p}_{p1→p2}}\)</span> in <strong>Sigma3</strong> that are shown in the following:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">L_p_po</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-11-7564b81074a0&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>L_p_po

<span class="ansi-red-fg">NameError</span>: name &#39;L_p_po&#39; is not defined
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">Sigma3</span>
</pre></div>
</div>
</div>
<p>To find the CSL and DSC lattices the user should use the function <strong>find_csl_dsc</strong>. This function is available in a file with the same name. To use this function first you must import byxtal as a package or directly import the function from the file.</p>
<p><strong>find_csl_dsc</strong> needs two inputs and provides the CSL and DSC lattices in primitive basis. The syntax is as follows:</p>
<div class="math notranslate nohighlight">
\begin{equation}
\mathcal{Λ^{p1}_{CSL}, Λ^{p1}_{DSC}} = \mathbf{find\_csl\_dsc}(\mathcal{Λ^{po}_p, T^p_{p1→p2}})
\end{equation}</div><p>Follow the steps below to obtain the CSL and DSC lattices using <strong>byxtal</strong>:</p>
<p>First import the appropriate module from <strong>byxtal</strong>. Next call the <strong>find_csl_dsc</strong> function with the following syntax:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">GBpy.find_csl_dsc</span> <span class="k">as</span> <span class="nn">gb_csl</span>
<span class="n">L_csl_p1</span><span class="p">,</span> <span class="n">L_dsc_p1</span> <span class="o">=</span> <span class="n">gb_csl</span><span class="o">.</span><span class="n">find_csl_dsc</span><span class="p">(</span><span class="n">L_p_po</span><span class="p">,</span> <span class="n">Sigma3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>where <span class="math notranslate nohighlight">\(\mathcal{Λ^{p1}_{CSL}}\)</span> is obtained as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">L_csl_p1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>and <span class="math notranslate nohighlight">\(\mathcal{Λ^{p1}_{DSC}}\)</span> is obtained as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">L_dsc_p1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>To find the <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{CSL}}\)</span> and <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{DSC}}\)</span> , one must change the reference frame to the orthogonal basis as follows:</p>
<div class="math notranslate nohighlight">
\begin{equation}
\mathcal{Λ^{po1}_{CSL}}$= \mathcal{Λ^{po}_{p}}$ \times \mathcal{Λ^{po1}_{DSC}}
\end{equation}</div><p>Hence we can obtain the <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{CSL}}\)</span> as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">L_csl_po1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">L_p_po</span><span class="p">,</span> <span class="n">L_csl_p1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">L_csl_po1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Also we have:</p>
<div class="math notranslate nohighlight">
\begin{equation}
\mathcal{Λ^{po1}_{DSC}} = \mathcal{Λ^{po}_{p}} \times \mathcal{Λ^{p1}_{DSC}}
\end{equation}</div><p>Therefore we can obtain the <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{DSC}}\)</span> as:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">L_dsc_po1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">L_p_po</span><span class="p">,</span> <span class="n">L_dsc_p1</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">L_dsc_po1</span>
</pre></div>
</div>
</div>
<p>The <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{CSL}}\)</span> provides a basis for the <strong>coincidence sites</strong> of a bicrystal that have a misorientation of the specified Σ (e.g. Σ3 in this case). Note that the basis obtained <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{CSL}}\)</span> is in reduced form (using lll-reduction algorithm) and therefore the length of the basis vectors are as close as possible. Each column of the Λpo1CSL</p>
<p>contains one of the basis vectors of the CSL lattice. These basis vectors of CSL the lattice are of paramount importance in simulation of interfaces and are used to construct a periodic simulation cell.</p>
<p>The <span class="math notranslate nohighlight">\(\mathcal{Λ^{po1}_{DSC}}\)</span> provides a basis for the <strong>displacement shift lattice</strong> of a bicrystal that have a misorientation of the specified Σ (e.g. Σ3 in this case). The basis vectors of a DSC lattice provide unique displacement intervals in space in which the coincidence pattern of the bicrystal remains preserved. In other words any displacement in one of the bicrystals along the DSC basis vectors and with a magnitude of integer multiples of the norm of the DSC basis vectors,
preserves the CSL pattern. This property of the DSC lattice is of great importance in energy minimization of interfaces.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Modules.html" class="btn btn-neutral float-right" title="Modules" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="2nd.html" class="btn btn-neutral float-left" title="# 2. How to find a reduced planar basis for a Grain Boundary using byxtal!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Leila Khalili

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>